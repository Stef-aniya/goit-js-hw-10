{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n    btn:document.querySelector('button[data-start]'),\n    input: document.querySelector('#datetime-picker'),\n}\n    refs.btn.disabled = true;\n\n    let userSelectedDate = null;\n\n    flatpickr(refs.input, {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const click = selectedDates[0] || null;\n        userSelectedDate = click;\n\n        if (!click) {\n        refs.btn.disabled = true;\n        return;\n        }\n\n        const now = Date.now();\n\n\n        if (click.getTime() <= now) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            timeout: 3000\n        });\n        userSelectedDate = null;\n        refs.btn.disabled = true;\n        return;\n        }\n\n\n        refs.btn.disabled = false;\n    }\n    });\n\n\nconst timer = {\n\n    intervalId:null,\n    isActive: false, \n\n    start(){\n        if(this.isActive)return;\n\n        if (!userSelectedDate) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Please choose a date',\n                    position: 'topRight',\n                    timeout: 2500,\n                });\n                return;\n                }\n\n\n        const targetTime = userSelectedDate.getTime()\n\n        refs.input.disabled = true;\n        refs.btn.disabled = true;\n\n        this.isActive = true\n\n        tick();\n\n        this.intervalId = setInterval(tick,1000)\n\n        \n        const self = this;\n\n        function tick(){\n            const currentTime = new Date()\n            const diff = targetTime  - currentTime\n\n            if (diff <= 0) {\n                clearInterval(self.intervalId);\n                self.intervalId = null;\n                self.isActive = false;\n\n                updateTimerDisplay({    \n                days: 0,\n                hours: 0,\n                minutes: 0,\n                seconds: 0,\n        });\n\n            refs.input.disabled = false;\n\n                iziToast.success({\n                    title: 'Done',\n                    message: 'Countdown finished',\n                    position: 'topRight',\n                    timeout: 2000\n                });\n\n                return;\n        }\n\n            const time = convertMs(diff);                       \n            updateTimerDisplay(time);\n        }\n    }\n}\n\n\n            refs.btn.addEventListener('click',()=>{\n                timer.start()\n            })\n\n        function updateTimerDisplay({ days, hours, minutes, seconds }) {\n        refs.days.textContent = String(days).padStart(2, \"0\");   \n        refs.hours.textContent = String(hours).padStart(2, \"0\");\n        refs.minutes.textContent = String(minutes).padStart(2, \"0\");\n        refs.seconds.textContent = String(seconds).padStart(2, \"0\");\n        }\n\n\n\n\n\n\n\n\n\n\n        function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n    }"],"names":["refs","userSelectedDate","flatpickr","selectedDates","click","now","iziToast","timer","targetTime","tick","self","diff","updateTimerDisplay","time","convertMs","days","hours","minutes","seconds","ms"],"mappings":"sFAKA,MAAMA,EAAO,CACT,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,IAAI,SAAS,cAAc,oBAAoB,EAC/C,MAAO,SAAS,cAAc,kBAAkB,CACpD,EACIA,EAAK,IAAI,SAAW,GAEpB,IAAIC,EAAmB,KAEvBC,EAAUF,EAAK,MAAO,CACtB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQG,EAAe,CACnB,MAAMC,EAAQD,EAAc,CAAC,GAAK,KAGlC,GAFAF,EAAmBG,EAEf,CAACA,EAAO,CACZJ,EAAK,IAAI,SAAW,GACpB,MACC,CAED,MAAMK,EAAM,KAAK,MAGjB,GAAID,EAAM,QAAS,GAAIC,EAAK,CAC5BC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,WACV,QAAS,GACrB,CAAS,EACDL,EAAmB,KACnBD,EAAK,IAAI,SAAW,GACpB,MACC,CAGDA,EAAK,IAAI,SAAW,EACvB,CACL,CAAK,EAGL,MAAMO,EAAQ,CAEV,WAAW,KACX,SAAU,GAEV,OAAO,CACH,GAAG,KAAK,SAAS,OAEjB,GAAI,CAACN,EAAkB,CACfK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,uBACT,SAAU,WACV,QAAS,IAC7B,CAAiB,EACD,MACC,CAGT,MAAME,EAAaP,EAAiB,QAAS,EAE7CD,EAAK,MAAM,SAAW,GACtBA,EAAK,IAAI,SAAW,GAEpB,KAAK,SAAW,GAEhBS,IAEA,KAAK,WAAa,YAAYA,EAAK,GAAI,EAGvC,MAAMC,EAAO,KAEb,SAASD,GAAM,CAEX,MAAME,EAAOH,EADO,IAAI,KAGxB,GAAIG,GAAQ,EAAG,CACX,cAAcD,EAAK,UAAU,EAC7BA,EAAK,WAAa,KAClBA,EAAK,SAAW,GAEhBE,EAAmB,CACnB,KAAM,EACN,MAAO,EACP,QAAS,EACT,QAAS,CACzB,CAAS,EAEGZ,EAAK,MAAM,SAAW,GAElBM,EAAS,QAAQ,CACb,MAAO,OACP,QAAS,qBACT,SAAU,WACV,QAAS,GAC7B,CAAiB,EAED,MACP,CAEG,MAAMO,EAAOC,EAAUH,CAAI,EAC3BC,EAAmBC,CAAI,CAC1B,CACJ,CACL,EAGYb,EAAK,IAAI,iBAAiB,QAAQ,IAAI,CAClCO,EAAM,MAAO,CAC7B,CAAa,EAEL,SAASK,EAAmB,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC/DlB,EAAK,KAAK,YAAc,OAAOe,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDf,EAAK,MAAM,YAAc,OAAOgB,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDhB,EAAK,QAAQ,YAAc,OAAOiB,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1DjB,EAAK,QAAQ,YAAc,OAAOkB,CAAO,EAAE,SAAS,EAAG,GAAG,CACzD,CAWD,SAASJ,EAAUK,EAAI,CAM3B,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAC1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EACpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EACjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}